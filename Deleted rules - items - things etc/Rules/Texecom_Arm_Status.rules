// ***************************
// Get the arm-status (FIXED FOR CLARITY)
// ***************************

// Optimized for openHAB 5

rule "Get ASTATUS"
	// We will also poll for the armed status (ASTATUS). This is done every minute. This is to check if the arm status is in line with what we have derived in rule "Alarm interface via UDP"
	// This process is completely optional, just an extra check in case OpenHAB "misses" an earlier armed/disarmed message.
when   
    // Trigger every minute
	Time cron "0 * * * * ?" or
    // Trigger when the openHAB system starts up
	System started
then
    // Use the modern events.sendCommand method to send the status request command
	events.sendCommand(Tex_UDP_Send, "ASTATUS")
    
    // Add logging to confirm the action took place
    logInfo("TexecomPolling", "Sent ASTATUS poll command.")
	
end
